{"ast":null,"code":"import queryString from 'query-string';\nimport { of } from 'rxjs';\nimport { ajax } from 'rxjs/ajax';\nimport { ofType } from 'redux-observable';\nimport { delay, map, switchMap, takeUntil, catchError } from 'rxjs/operators';\nimport { get as _get, isEmpty as _isEmpty } from 'lodash-es';\nimport { charactersActionCreators } from './charactersActions';\nexport function listCharactersEpics(action$) {\n  return action$.pipe(ofType(charactersActionCreators.LIST_ALL.REQUEST), switchMap(function (action) {\n    var query = queryString.stringify({\n      page: _get(action, 'payload.page', 1)\n    });\n    var reqQuery = _isEmpty(query) ? '' : \"?\".concat(query);\n    return ajax.getJSON(\"https://rickandmortyapi.com/api/character/\".concat(reqQuery)).pipe(delay(1), map(function (response) {\n      return charactersActionCreators.LIST_ALL.PASSED(response);\n    }), catchError(function (error) {\n      return of(charactersActionCreators.LIST_ALL.FAILED(error.xhr.response));\n    }), takeUntil(action$.pipe(ofType(charactersActionCreators.LIST_ALL.CANCEL))));\n  }), catchError(function (error) {\n    return of(charactersActionCreators.LIST_ALL.FAILED(error));\n  }));\n}","map":{"version":3,"sources":["/Volumes/macOS SD/Users/c.mostafa/Projects/ha-tech-task/src/Characters/charactersEpics.js"],"names":["queryString","of","ajax","ofType","delay","map","switchMap","takeUntil","catchError","get","_get","isEmpty","_isEmpty","charactersActionCreators","listCharactersEpics","action$","pipe","LIST_ALL","REQUEST","action","query","stringify","page","reqQuery","getJSON","response","PASSED","error","FAILED","xhr","CANCEL"],"mappings":"AAAA,OAAOA,WAAP,MAAwB,cAAxB;AACA,SAASC,EAAT,QAAmB,MAAnB;AACA,SAASC,IAAT,QAAqB,WAArB;AACA,SAASC,MAAT,QAAuB,kBAAvB;AACA,SAASC,KAAT,EAAgBC,GAAhB,EAAqBC,SAArB,EAAgCC,SAAhC,EAA2CC,UAA3C,QAA6D,gBAA7D;AACA,SAASC,GAAG,IAAIC,IAAhB,EAAsBC,OAAO,IAAIC,QAAjC,QAAiD,WAAjD;AAEA,SAASC,wBAAT,QAAyC,qBAAzC;AAGA,OAAO,SAASC,mBAAT,CAA6BC,OAA7B,EAAsC;AAC3C,SAAOA,OAAO,CACXC,IADI,CAEHb,MAAM,CAACU,wBAAwB,CAACI,QAAzB,CAAkCC,OAAnC,CAFH,EAGHZ,SAAS,CAAC,UAACa,MAAD,EAAY;AACpB,QAAMC,KAAK,GAAGpB,WAAW,CAACqB,SAAZ,CAAsB;AAAEC,MAAAA,IAAI,EAAEZ,IAAI,CAACS,MAAD,EAAS,cAAT,EAAyB,CAAzB;AAAZ,KAAtB,CAAd;AAEA,QAAMI,QAAQ,GAAGX,QAAQ,CAACQ,KAAD,CAAR,GACb,EADa,cAETA,KAFS,CAAjB;AAIA,WAAOlB,IAAI,CAACsB,OAAL,qDAA0DD,QAA1D,GACJP,IADI,CAEHZ,KAAK,CAAC,CAAD,CAFF,EAGHC,GAAG,CAAC,UAACoB,QAAD;AAAA,aAAcZ,wBAAwB,CAACI,QAAzB,CAAkCS,MAAlC,CAAyCD,QAAzC,CAAd;AAAA,KAAD,CAHA,EAIHjB,UAAU,CAAC,UAACmB,KAAD;AAAA,aAAW1B,EAAE,CAACY,wBAAwB,CAACI,QAAzB,CAAkCW,MAAlC,CAAyCD,KAAK,CAACE,GAAN,CAAUJ,QAAnD,CAAD,CAAb;AAAA,KAAD,CAJP,EAKHlB,SAAS,CAACQ,OAAO,CAACC,IAAR,CAAab,MAAM,CAACU,wBAAwB,CAACI,QAAzB,CAAkCa,MAAnC,CAAnB,CAAD,CALN,CAAP;AAOD,GAdQ,CAHN,EAkBHtB,UAAU,CAAC,UAACmB,KAAD;AAAA,WAAW1B,EAAE,CAACY,wBAAwB,CAACI,QAAzB,CAAkCW,MAAlC,CAAyCD,KAAzC,CAAD,CAAb;AAAA,GAAD,CAlBP,CAAP;AAoBD","sourcesContent":["import queryString from 'query-string'\nimport { of } from 'rxjs'\nimport { ajax } from 'rxjs/ajax'\nimport { ofType } from 'redux-observable'\nimport { delay, map, switchMap, takeUntil, catchError } from 'rxjs/operators'\nimport { get as _get, isEmpty as _isEmpty } from 'lodash-es'\n\nimport { charactersActionCreators } from './charactersActions'\n\n\nexport function listCharactersEpics(action$) {\n  return action$\n    .pipe(\n      ofType(charactersActionCreators.LIST_ALL.REQUEST),\n      switchMap((action) => {\n        const query = queryString.stringify({ page: _get(action, 'payload.page', 1)})\n\n        const reqQuery = _isEmpty(query)\n          ? ''\n          : `?${query}`\n\n        return ajax.getJSON(`https://rickandmortyapi.com/api/character/${reqQuery}`)\n          .pipe(\n            delay(1),\n            map((response) => charactersActionCreators.LIST_ALL.PASSED(response)),\n            catchError((error) => of(charactersActionCreators.LIST_ALL.FAILED(error.xhr.response))),\n            takeUntil(action$.pipe(ofType(charactersActionCreators.LIST_ALL.CANCEL))),\n          )\n      }),\n      catchError((error) => of(charactersActionCreators.LIST_ALL.FAILED(error))),\n    )\n}\n"]},"metadata":{},"sourceType":"module"}